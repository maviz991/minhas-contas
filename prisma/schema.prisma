// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Modelo para suas contas (banco, carteira, etc.)
model Account {
  id        String   @id @default(cuid())
  name      String   @unique // O nome da conta deve ser único
  balance   Float    @default(0)
  createdAt DateTime @default(now())

  transactions Transaction[] // Uma conta pode ter várias transações
}

// Modelo para suas categorias (Alimentação, Transporte, etc.)
model Category {
  id   String @id @default(cuid())
  name String @unique // O nome da categoria deve ser único

  transactions Transaction[] // Uma categoria pode ter várias transações
}

// Modelo principal, para cada transação (receita ou despesa)
model Transaction {
  id          String   @id @default(cuid())
  description String
  amount      Float // Valor da transação
  date        DateTime @default(now())
  type        String // Será "RECEITA" ou "DESPESA"
  createdAt   DateTime @default(now())

  // --- Relações ---
  // Diz que esta transação pertence a UMA conta
  account   Account @relation(fields: [accountId], references: [id])
  accountId String

  // Diz que esta transação pertence a UMA categoria
  category   Category @relation(fields: [categoryId], references: [id])
  categoryId String
}